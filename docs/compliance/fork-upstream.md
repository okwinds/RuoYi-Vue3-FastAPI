# Fork & Upstream Sync（上游同步与改造边界）

本仓库为开源项目 `RuoYi-Vue3-FastAPI` 的 fork，用于二次开发与业务集成。为了减少未来同步上游的成本，约定如下：

---

## 1) 改造边界（优先顺序）

1) **优先新增，不要重排**
   - 优先通过新增模块、扩展点、适配层实现需求，尽量避免对上游核心目录做大范围重构。

2) **功能变更与格式化分离**
   - 避免“顺手全仓库格式化”；若确需全量格式化，必须在 spec 中写清范围、理由与回滚方案。

3) **保持目录语义清晰**
   - 后端代码集中在 `ruoyi-fastapi-backend/`，前端在 `ruoyi-fastapi-frontend/`，E2E 在 `ruoyi-fastapi-test/`。
   - 业务扩展建议新增 `module_*/`（后端）或 `src/views/*`（前端）对应模块，并配套文档与测试护栏。

---

## 2) 上游同步建议流程（参考）

> 下面是推荐流程，具体以团队 Git 工作流为准。

1) 定期同步上游（例如每 2~4 周一次），避免一次性跨度过大
2) 同步前先跑离线回归，确保当前分支是“绿的”
3) 同步后优先解决冲突与构建问题，再补齐差异测试
4) 若出现行为差异，必须写入：
   - `docs/worklog.md`：冲突点、关键决策、验证命令
   - 对应 task summary：最终影响与回滚点

---

## 3) 许可证与署名

- 保留上游 `LICENSE` 文件与必要的版权声明。
- 若引入第三方组件/代码片段，必须确认其许可证与使用方式，并在合适的位置记录来源与许可要求。

